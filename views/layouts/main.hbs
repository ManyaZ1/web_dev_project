<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{{title}}</title>

    <!-- Core JS -->
    <script src="/js/common.js" defer></script>
    <!-- Core CSS -->
    <link rel="stylesheet" href="/css/common.css" />

    <!-- Optional view-specific CSS -->
    {{#if styles}}
      {{{styles}}}
    {{/if}}
  </head>

  <body class="{{#if isAuthPage}}auth-mode{{/if}}">
    <!-- Global Auth Background -->
    <div class="auth-background {{#if isAuthPage}}visible{{/if}}"></div>
    <!-- Header -->
    <header class="top-bar">
      <a href="/" class="logo">✈ FlyExpress</a>
      <button class="hamburger" id="hamburgerBtn" aria-label="Toggle Menu">&#9776;</button>
      <nav id="navMenu">
        <ul>
          <li><a href="/tickets">Tickets</a></li>
          <li><a href="/top-destinations">Top Destinations</a></li>
          <li><a href="/about">About us</a></li>

          <!-- User-specific Links -->
          {{#if @root.session.user}}
              <li><a href="/favorites">Favourites</a></li>
              <li><a href="/logout">Logout ({{@root.session.user}})</a></li>
          {{else}}
              <li><a href="/login">Login</a></li>
              <li><a href="/register">Register</a></li>
          {{/if}}
        </ul>
      </nav>
    </header>

    <!-- View Content -->
    {{{body}}}

    <!-- Footer -->
    <footer class="footer">
      © 2025 FlyExpress. All rights reserved.
    </footer>

    <!-- Optional view-specific JS -->
    {{#if script}}
      {{{script}}}
    {{/if}}
  </body>
</html>
