<div class="page-container">
    <h2>üåç Top Destinations</h2>
    <div class="destinations-grid">
        {{#each destinations}}
        <div class="destination-card" ontouchstart="handleTouch(this)">
            <div class="card-inner">
                <div class="card-front">
                    <img src="{{this.image}}" alt="{{this.name}}" />
                    <h3>{{this.name}}</h3>
                    <button class="flip-btn" onclick="event.stopPropagation(); this.closest('.destination-card').classList.add('flipped');">Flip</button>
                </div>
                <div class="card-back">
                    <h3>{{this.name}}</h3>
                    <p>{{this.description}}</p>
                    <button onclick="viewDestination('{{this.name}}')">View More</button>
                    <button class="flip-btn" onclick="event.stopPropagation(); this.closest('.destination-card').classList.remove('flipped');">Back</button>
                </div>
            </div>
        </div>
        {{/each}}
    </div>
</div>

<script>
    // Reset all cards to default on window resize
    window.addEventListener('resize', () => {
        document.querySelectorAll('.destination-card.flipped').forEach(card => {
            card.classList.remove('flipped');
        });
    });

    function handleTouch(card) {
        // Prevents accidental flips on long press or drag
        if (!card.classList.contains('flipped')) {
            card.classList.add('flipped');
        } else {
            card.classList.remove('flipped');
        }
    }
</script>
